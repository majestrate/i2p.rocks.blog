;zjs.extend({autocomplete:function(){this.each(function(){var i=this,e=zjs(this),a=e.position(),d=a.top+e.height(),s=a.left,r=e.width(),u,o=this.getAttribute('data-url'),t=null,c=this.getAttribute('data-min-length')||2,n={key:''},l=this.getAttribute('data-params')||null;e.attr('autocomplete','off');this.dataAutocomplete={};this.onkeyup=function(u){var b=u||window.event,f=b.keyCode;if(f==27){zjs('.autocomplete-result').remove();if(t){t.remove();t=null}}else if(f==40||f==38){h=this.autocompleteResult.children('.selected');if(h.length>0){this.autocompleteResult.children().removeClass('selected');if(f==40){h.next().addClass('selected')}else{h.prev().addClass('selected')}}else{if(f==40){h=this.autocompleteResult.children().first().addClass('selected')}else{h=this.autocompleteResult.children().last().addClass('selected')}};var g=this.autocompleteResult.find('.selected'),p=(g.length>0)?g.attr('data-label'):e.val();e.val(p)}else if(f==13){var h=0;if(this.autocompleteResult!=undefined){var h=this.autocompleteResult.children('.selected')};var p=(h.length>0)?h.attr('data-label'):e.val(),j=(h.length>0)?h.attr('data-value')||p:p;e.val(p);e.fireEvent('selected',[j,h]);zjs('.autocomplete-result').remove()}else if(f!=37&&f!=39){a=e.position();d=a.top+e.height(),s=a.left,r=e.width();if(e.val()!=''&&o&&e.val().length>=c){if(t==null){t=zjs('body').append('<span class="fa fa-spinner fa-spin"></span>');t.css({position:'absolute',top:a.top+(e.height()/2)-8+'px',left:s+(e.width())-20+'px','z-index':'10000'})};n.key=e.val();if(l!=null){var z=l.split('&');for(var v=0,y=z.length;v<y;v++){var m=z[v].split('=');n[m[0]]=m[1]}};zjs.ajax({url:o,data:n,success:function(e){if(t){t.remove();t=null};i.dataAutocomplete=JSON.parse(e);if(i.dataAutocomplete.length>0){i.drawTable()}else{zjs('.autocomplete-result').remove()}}})}else{zjs('.autocomplete-result').remove()}}};this.drawTable=function(){var n=zjs('.autocomplete-result'),i='<div class="autocomplete-result" style="top:'+d+'px;left:'+s+'px;width:'+r+'px;z-index:10000;">';if(n.length){i=''};var t,a='';for(var l=0,o=this.dataAutocomplete.length;l<o;++l){t=this.dataAutocomplete[l];a='<div class="autocomplete-row" data-label="'+t.label+'">'+t.label+'</div>';if(t.value){a='<div class="autocomplete-row" data-value="'+t.value+'">'+t.label+'</div>'};if(t.html){a='<div class="autocomplete-row"';if(t.value){a+=' data-value="'+t.value+'"'};if(t.label){a+=' data-label="'+t.label+'"'};a+='>'+t.html+'</div>'};i+=a};if(!n.length){i+='</div>';this.autocompleteResult=zjs('body').append(i)}else{this.autocompleteResult=n;n.html(i)};this.autocompleteResult.children().click(function(){var t=zjs(this),a=t.attr('data-label'),i=t.attr('data-value')||a;e.val(a);e.fireEvent('selected',[i,t]);zjs('.autocomplete-result').remove()})}})}});zjs.extend({placeholder:function(){var t=Zjs.prototype.val;Zjs.prototype.val=function(e){var a=t.call(this,e);if(e!=undefined)a.css('color','');if(this[0].value==this[0].placeholder){a=''};return a};this.each(function(){this.placeholder=this.getAttribute('placeholder');this.value=this.placeholder;this.style.color='#999';this.onfocus=function(){if(this.value==this.placeholder){e.call(this)}};this.onkeydown=function(){if(this.value==this.placeholder){this.value=''}};this.onkeyup=function(){this.style.color='';if(this.value==''){this.value=this.placeholder;e.call(this)}}});function e(){this.style.color='#999';if(this.createTextRange){var e=this.createTextRange();e.move('character',0);e.select()}else{this.setSelectionRange(0,0)}}}});zjs.extend({validate:function(){var e=this.find('input[required], textarea[required], select[required]');this.find('.required-msg').remove(),validate=!0;e.each(function(){var e=zjs(this),a=e.attr('type')||this.tagName.toLowerCase(),s=e.val(),t=/.+/gi,i=e.attr('data-error-message')||'The field can not be empty';if(e.attr('data-pattern')){t=new RegExp(e.attr('data-pattern').replace(/^(\/)|(\/)$/g,''),'gi')};e.removeClass('input-error');e.parent().css('position','relative');switch(!0){case(a=='number'):t=/^[-+]?(\d+|\d+\.\d*|\d*\.\d+)$/;i=e.attr('data-error-message')||'Please enter a valid number';break;case(a=='email'):t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;i=e.attr('data-error-message')||'Please enter a valid email address';break;case(a=='url'):t=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;i=e.attr('data-error-message')||'Please enter a valid url';break;case(a=='checkbox'||a=='radio'):s=e[0].checked;t=/(true)/;i=e.attr('data-error-message')||'Please check this field';break;case(a=='select'):t=/^(?!(-1))/;i=e.attr('data-error-message')||'Please check this field';break;default:};if(!t.test(s)){validate=!1;zjs('<span class="required-msg"><span class="icon fa fa-warning"></span> '+i+'</span>').after(e);e.addClass('input-error');e.focus(function(){e.brothers('.required-msg').fadeOut()})}else{e.addClass('input-success')}});return validate}});var locale=window.navigator.userLanguage||window.navigator.language;locale=locale.split('-')[0];var months={it:['Gennaio','Febbraio','Marzo','Aprile','Maggio','Giugno','Luglio','Agosto','Settembre','Ottobre','Novembre','Dicembre'],en:['January','February','March','April','May','June','July','August','September','October','November','December']};var daysWeek={it:['Lun','Mar','Mer','Gio','Ven','Sab','Dom'],en:['Mon','The','Wed','Thu','Fri','Sat','Sun']};if(months[locale]===undefined)locale='en';var Calendar=function(e,a,s){var i={};this.setDate=function(e,t,a){this.day=e||undefined;this.month=t||undefined;this.year=a||undefined};this.getDate=function(){return[this.year,this.month,this.day]};this.getDateFromIndex=function(e){return i[e]};this.calculateDate=function(){i=(i==undefined)?{}:{select:i.select};var l=[31,0,31,30,31,30,31,31,30,31,30,31],r=new Date();l[1]=(((r.getFullYear()%100!=0)&&(r.getFullYear()%4==0))||(r.getFullYear()%400==0))?29:28;var s=this.month-1,o=l[s];firstDay=new Date(this.year,s,1).getDay(),index=-1,c=1,today=new Date(this.year,s,this.day).getDate(),e,t=35;if(firstDay==0)firstDay=7;if(o+(firstDay-1)>t){t+=7};for(var a=1;a<=t;a++){e={year:+this.year,month:+this.month};index=-1;if(a>=firstDay){index=a-(firstDay-1);if(index===today){i.select={day:today,month:+this.month,year:+this.year}}};if(index>o){index=-1};if(index===-1){if(a<firstDay){var n=11;e.month=n+1;if(s>0){n=s-1;e.month=s};e.year=(n==11)?(e.year-1):e.year;index=l[n]-((firstDay-1)-a)}else{e.month+=1;if(s==11){e.year+=1;e.month=1};index=c;c++}};e.day=index;i[a]=e};return i};this.draw=function(){var i=new Date(),t=this.calculateDate(),a='<table><thead><tr>',n=i.getMonth(),l=i.getDate(),s=i.getFullYear();for(var e=0;e<7;++e){a+='<th>'+daysWeek[locale][e]+'</th>'};a+='</tr></thead><tbody><tr>';for(var e in t){if(e!='select'){if(t[e].month!=this.month){a+='<td class="odd" data-index="'+e+'">'+t[e].day+'</td>'}else{a+=((t.select.day==t[e].day&&t.select.month==t[e].month&&t.select.year==t[e].year)?'<td class="select"  data-index="'+e+'">':'<td data-index="'+e+'">')+t[e].day+'</td>'};if(e%7==0){a+='</tr>'}}};a+='</tbody></table>';return a};this.setDate(e,a,s)};zjs.extend({calendar:function(e){this.each(function(){var e=zjs(this),a=e.position();this.onkeypress=function(){return!1};if(e.attr('data-show')!=undefined){t(e,!1)};e.click(function(a){t(e)});function t(e,a){zjs('.zjs-calendar').remove();var s=p(e.attr('data-format')),i=e.val(),a=(a==undefined)?!0:!1;if(i==''){var l=new Date(),i=[];if(e.attr('data-format')!=undefined){for(var o in s){if(o=='dd')i.push(l.getDate());if(o=='mm')i.push(l.getMonth()+1);if(o=='yyyy')i.push(l.getFullYear())}}else{i=[l.getFullYear(),l.getMonth()+1,l.getDate()]};i=i.join(s.s)};var d=i.split(s.s),t=d[s['mm']],n=d[s['yyyy']],m=d[s['dd']],r=new Calendar(m,t,n),c=e.position(),v=r.draw(),g='<div class="zjs-calendar"><div class="zjs-calendar-action-bar"><button class="zjs-calendar-prev">&laquo;</button><span>'+months[locale][t-1]+' '+n+'</span><button class="zjs-calendar-next">&raquo;</button></div>'+v+'</div>',h=zjs('body').append(g).css({top:(c.top+e.height())+'px',left:c.left+'px'});u(h,e);if(a===!0){zjs('.zjs-calendar').clickOut(function(t){if(t.target!=e[0]){h.remove();document.getElementsByTagName('html')[0].onclick=null}})};zjs('.zjs-calendar .zjs-calendar-next, .zjs-calendar .zjs-calendar-prev').click(function(a){if(zjs(a.target).hasClass('zjs-calendar-next')){if(t<12){t=+t+1}else if(t==12){t=1;n=+n+1}}else{if(t>1){t=t-1}else if(t==1){t=12;n=n-1}};r.setDate(undefined,t,n);zjs(this).parent().brothers('table').replace(r.draw());zjs(this).brothers('span').html(months[locale][t-1]+' '+n);u(zjs(this).parents('.zjs-calendar'),e)});function u(e,t){e.find('table td').click(function(a){var i=r.getDateFromIndex(zjs(this).attr('data-index'));if(i.day<10){i.day='0'+i.day};if(i.month<10){i.month='0'+i.month};f(t,{yyyy:i.year,mm:i.month,dd:i.day});t.fireEvent('change');e.remove();document.getElementsByTagName('html')[0].onclick=null})};function p(e){if(e==null){return{s:'-',yyyy:0,mm:1,dd:2}};var n=e.split(/[^A-z]/),t=e.split(/[A-z]/),i={};for(var s=t.length;s--;){if(t[s]!=''){t=t[s];break}};i.s=t;for(var a=0,l=n.length;a<l;++a){i[n[a]]=a};return i};function f(e,t){var a=[];for(var i in s){if(i!='s'){a.push(t[i])}};zjs(e).val(a.join(s.s))}}});return this}});zjs('.slides').each(function(){var a=zjs(this),h=zjs(this).find('.slide'),t=h.length,o,s,e=1,m=new jsMorph(),r=new jsMorph(),g=this,d=a.append('<div class="loader"></div>')[0],n=this.getAttribute('data-duration')||6000,i=n,c=0,l=a.children('.btn-next, .btn-prev'),v=zjs(this).append('<div class="spinner"><div><div><span class="fa fa-gear fa-spin fa-5x"></span>...loading</div></div></div>');if(t==1){l.remove()};var f=new Image();f.onload=function(){v.hide()};f.src=a.find('img').first().attr('src');var u=function(a){var i='next';if(/(btn-prev)/i.test(a.target.className)){i='prev';e=(e==1)?t:e-1}else{e=(e>=t)?1:e+1};p(i,e)};if(t>1){l.bind('click',u)};function p(e,t){o=a.find('.active');s=h.eq(t);s.addClass(e);l.unbind('click');m.reset(o[0],{left:(e=='next')?'-100%':'100%'},{duration:700},quinticEaseOut,null,null,function(){o.removeClass('active').removeAttribute('style')}).concat(s[0],{left:'0px'},{duration:700},quinticEaseOut,null,null,function(){s.removeClass(e).addClass('active').removeAttribute('style');l.bind('click',u)}).start()};this.start=function(){if(t>1){r.reset(d,{width:'100%'},{duration:i},null,null,function(e,t,a){c=i-a},function(){e=(e>=t)?1:e+1;p('next',e);d.style.width='0px';i=n;setTimeout(function(){a[0].start()},10)}).start()}};this.pause=function(){i=(c==0)?n:c;r.reset()};this.stop=function(){d.style.width=0;i=n;r.reset()}});zjs.ready(function(){simplecssInit()});function simplecssInit(){zjs('<div class="icon-hide-menu"><span></span><span></span><span></span></div>').before('.menu > ul, .menu-horizontal > ul').click(function(){zjs(this).brothers('ul').first().slideToggle(500,quadraticEaseInOut,function(){this.style.cssText=''})});zjs('.msg[data-dismiss]').live('click','.msg .close',function(){var e=zjs(this).parent().attr('data-dismiss');if(e=='hide'){zjs(this).parent().hide()}else if(e=='fade'){zjs(this).parent().fadeOut(500)}});var e=zjs('.dropdown');e.each(function(){var t=zjs(this),e=t.attr('data-icon'),e=(e!=undefined)?e:'icon';if(t.find('.dropdown-item').brothers().find('.dropdown-icon').length==0){t.find('.dropdown-item').brothers().append('<span class="dropdown-icon '+e+'"></span>')};zjs(this).find('.dropdown-icon').first().click(function(e){console.log('in');e.stopPropagation();zjs('.dropdown-item').hide();zjs(this).parent().brothers('.dropdown-item').show()})});e.click(function(e){e.stopPropagation();zjs('.dropdown-item').hide();var t=zjs(this);t.children('.dropdown-item').show();t.clickOut(function(e){zjs('.dropdown-item').hide();document.getElementsByTagName('html')[0].onclick=null})});zjs('.dropdown-icon').click(function(e){e.stopPropagation();zjs(this).parent().brothers('.dropdown-item').show();zjs(this).clickOut(function(e){zjs('.dropdown-item').hide();document.getElementsByTagName('html')[0].onclick=null})});zjs('.dropdown-item').click(function(e){e.stopPropagation();var t=e.target;if(t.tagName.toLowerCase()=='img'){t=t.parentNode};t=zjs(t);var a=t.parents('.dropdown'),i=t.attr('data-value')||t.text();if(a.attr('data-set-value')){a.children().first().html(t.text()+''+a.children().first().children('.dropdown-icon')[0].outerHTML)};a.find('.dropdown-item').hide();a.fireEvent('change',[zjs.trim(i)])});zjs('.dialog').each(function(){if(!zjs(this).parent().hasClass('dialog-container')){zjs(this).wrap('<div class="dialog-container"></div>')}});var t=zjs('.dialog');zjs('.dialog.round').each(function(){zjs(this).children().last().addClass('round-bottom-left-rigth').css('border-bottom','none')});t.each(function(){zjs(this).children().last().css('border-bottom','0');var e=this.getAttribute('data-dismiss');if(!!e==!1){zjs(this).append('<span class="dialog-close close" data-dismiss="true"></span>')}});zjs(document).live('click','*[data-dismiss="true"]',function(){hideDialog(zjs(this).parents('.dialog'))});zjs('[data-open-dialog]').click(function(e){var s=zjs(this).attr('data-open-dialog'),t=zjs(s),i=t.attr('data-effect')||'cubicEaseOut',a=t.attr('data-duration')||700;showDialog(t,a,i,this)});zjs('.progress-bar').each(function(){var e=zjs(this);if(e.attr('data-value')!=undefined){var s=e.attr('data-value'),i=e.attr('data-max-value'),a=e.width(),t=(a/i)*s;e.append('<div style="width:'+t+'px;"></div>')}});zjs(window).bind('resize',function(){zjs('[data-type="date"]').calendar()});zjs('[data-type="date"]').calendar();zjs('.tabs .tabs-link a').click(function(e){e.preventDefault();var t=zjs(this),a=t.attr('href').split('#tab')[1],i=t.parent().brothers('.tabs-content').children().eq(a);t.fireEvent('before-show',i[0]);var s=t.parent().brothers('.tabs-content').children().hide().eq(a).show();t.brothers().removeClass('current');t.addClass('current')});zjs('.accordion .accordion-link').click(function(){var e=zjs(this);e.brothers().slideToggle(300,null,function(){e.removeClass('selected')},function(){e.addClass('selected')})});if(document.createElement('input').placeholder==undefined){zjs('[placeholder]').placeholder()};zjs('.autocomplete').autocomplete()};zjs('.dialog, .dialog-static').live('click','*[data-send-url]',function(){if(zjs(this).attr('disabled')==null){var a=this.innerHTML,t=zjs(this),e=t.parents('.dialog, .dialog-static');e.find('.dialog-msg').remove();if(e.validate()){t.children('.fa').remove();t.attr('disabled','disabled').append('<span class="fa fa-spinner fa-spin dialog-loading"></span>');var s=e.serialize(),i=this.getAttribute('data-send-url');zjs.ajax({url:i,data:s,success:function(i){t.removeAttribute('disabled').html(a);if(i){zjs('<div class="dialog-msg">'+i+'</div>').before(e.find('.dialog-body').children().first());return};location.reload()}})}}});function hideDialog(e){var t=e.parents('.dialog-container');e.css({display:'',left:'',top:''});t.hide();e.fireEvent('after-close',[e]);document.getElementsByTagName('html')[0].onclick=null};function showDialog(e,t,a,i){e.fireEvent('before-show',i);var a=(a!=undefined)?a:'cubicEaseOut',t=(t!=undefined)?t:700;e.parent().show();e.css({display:'inline-block'}).animate({top:'40px'},t,function(){e.fireEvent('after-show',i);if(!!e.attr('data-dismiss')==!1){zjs('body').keyup(function(e){if(e.which==27){e$()}});e.clickOut(function(){e$()})}},null,window[a])};function e$(){zjs('.dialog-container').each(function(){if(zjs(this).css('display')=='block'){hideDialog(zjs(this).children('.dialog'))}})};